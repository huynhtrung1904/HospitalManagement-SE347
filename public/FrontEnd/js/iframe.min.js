(()=>{var I=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ye=I(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});var Ge=function(){function e(){}return e.silentError=!0,e.debug=!1,e}();X.default=Ge});var Ie=I(_=>{"use strict";var O=_&&_.__assign||function(){return O=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},O.apply(this,arguments)},q=_&&_.__awaiter||function(e,t,n,o){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function d(u){try{i(o.next(u))}catch(h){l(h)}}function f(u){try{i(o.throw(u))}catch(h){l(h)}}function i(u){u.done?a(u.value):s(u.value).then(d,f)}i((o=o.apply(e,t||[])).next())})},F=_&&_.__generator||function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,s,a,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(i){return function(u){return f([i,u])}}function f(i){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,s&&(a=i[0]&2?s.return:i[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,i[1])).done)return a;switch(s=0,a&&(i=[i[0]&2,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return n.label++,{value:i[1],done:!1};case 5:n.label++,s=i[1],i=[0];continue;case 7:i=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(i[0]===6||i[0]===2)){n=0;continue}if(i[0]===3&&(!a||i[1]>a[0]&&i[1]<a[3])){n.label=i[1];break}if(i[0]===6&&n.label<a[1]){n.label=a[1],a=i;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(i);break}a[2]&&n.ops.pop(),n.trys.pop();continue}i=t.call(e,n)}catch(u){i=[6,u],s=0}finally{o=a=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(_,"__esModule",{value:!0});var E=ye(),D;(function(e){e.Create="Create",e.Upload="Upload"})(D||(D={}));var j;(function(e){e.CreateDocumentType="sharing/file",e.UploadDocumentType="original",e.CreateImageType="pish/image",e.UploadImageType="imgpsh"})(j||(j={}));var S;(function(e){e.Accept="Accept",e.AcceptEncoding="Accept-Encoding",e.BehaviorOverride="BehaviorOverride",e.Authorization="Authorization",e.ClientVersion="X-MS-Client-Version",e.ContentType="Content-Type"})(S||(S={}));var V;(function(e){e.applicationFormUrlEncoded="application/x-www-form-urlencoded",e.applicationJson="application/json"})(V||(V={}));var L;(function(e){e.Expired="expired",e.Failed="failed",e.InProgress="in progress",e.Malware="malware",e.Ready="ready"})(L||(L={}));var Ue=["image/jpeg","image/png","image/gif"],G=function(e){e.regionGTMS||(e.regionGTMS={ams:"https://us-api.asm.skype.com"})},W=function(e){var t;return t={},t[S.Authorization]="skype_token "+e,t[S.ClientVersion]="os=Windows; osVer=10; proc=Win32; lcid=en-us; deviceType=1; country=IN; clientName=swc; clientVer=912/0.106.0.34//swc",t},K=function(e){return e&&e.length>0?e:Ue},Me=function(e,t,n){var o=K(n);return o.includes(e.toLowerCase())?t===D.Create?j.CreateImageType:j.UploadImageType:t===D.Create?j.CreateDocumentType:j.UploadDocumentType},Pe=function(e){return q(void 0,void 0,void 0,function(){var t,n,o,s,a,l,d;return F(this,function(f){switch(f.label){case 0:E.default.debug&&console.log("[API][skypeTokenAuth]"),G(e),t=(e.amsEndpoint||((d=e.regionGTMS)===null||d===void 0?void 0:d.ams))+"/v1/skypetokenauth",n=(l={},l[S.Authorization]="skype_token "+e.token,l[S.Accept]=V.applicationJson,l[S.BehaviorOverride]="redirectAs404",l[S.ContentType]=V.applicationFormUrlEncoded,l),o={headers:n,method:"POST",body:"skypetoken="+e.token},f.label=1;case 1:return f.trys.push([1,3,,4]),[4,fetch(t,o)];case 2:return s=f.sent(),[2,s];case 3:throw a=f.sent(),!E.default.silentError&&console.log(a),new Error("AMSAuth");case 4:return[2]}})})},Ne=function(e,t,n,o){return q(void 0,void 0,void 0,function(){var s,a,l,d,f,i,u,h,b,g,A,R;return F(this,function(C){switch(C.label){case 0:E.default.debug&&console.log("[API][createObject]"),s=(g={},g[e]=["read"],g),a=Me(t.type,D.Create,o),l={filename:t.name,permissions:s,type:a},G(n),d=(n.amsEndpoint||((R=n==null?void 0:n.regionGTMS)===null||R===void 0?void 0:R.ams))+"/v1/objects",f=O(O({},W(n.token)),(A={},A[S.ContentType]=V.applicationJson,A)),i={headers:f,method:"POST",body:JSON.stringify(l),credentials:"include"},C.label=1;case 1:return C.trys.push([1,4,,5]),[4,fetch(d,i)];case 2:if(u=C.sent(),!u.ok)throw new Error("AMSCreateObjectFailed");return[4,u.json()];case 3:return h=C.sent(),[2,h];case 4:throw b=C.sent(),!E.default.silentError&&console.log(b),new Error("AMSCreateObjectFailed");case 5:return[2]}})})},xe=function(e,t,n,o){return q(void 0,void 0,void 0,function(){var s,a,l,d,f,i,u,h,b;return F(this,function(g){switch(g.label){case 0:E.default.debug&&console.log("[API][uploadDocument]"),G(n),s=Me(t.type,D.Upload,o),a=(n.amsEndpoint||((b=n==null?void 0:n.regionGTMS)===null||b===void 0?void 0:b.ams))+"/v1/objects/"+e+"/content/"+s,l=O(O({},W(n.token)),(h={},h[S.ContentType]=V.applicationFormUrlEncoded,h)),d={headers:l,method:"PUT",body:t.data?t.data:t},g.label=1;case 1:return g.trys.push([1,3,,4]),[4,fetch(a,d)];case 2:if(f=g.sent(),!f.ok)throw new Error("AMSUploadDocumentFailed");return i={name:t.name,size:t.size,type:t.type,id:e,url:a,fileSharingProtocolType:0},[2,i];case 3:throw u=g.sent(),!E.default.silentError&&console.log(u),new Error("AMSUploadDocumentFailed");case 4:return[2]}})})},Le=function(e,t,n){return q(void 0,void 0,void 0,function(){var o,s,a,l,d,f,i,u,h,b;return F(this,function(g){switch(g.label){case 0:E.default.debug&&console.log("[API][getViewStatus]"),G(t),o=(t.amsEndpoint||((b=t==null?void 0:t.regionGTMS)===null||b===void 0?void 0:b.ams))+"/v1/objects/"+e.id+"/views/"+(K(n).includes(e.type)?"imgpsh_fullsize_anim":"original")+"/status",s=W(t.token),a={headers:s,method:"GET"},g.label=1;case 1:return g.trys.push([1,4,,5]),[4,fetch(o,a)];case 2:return l=g.sent(),[4,l.json()];case 3:if(d=g.sent(),f=d.content_state,i=d.view_state,u=d.view_location,!u)throw new Error("view_location is empty");if(i&&i!==L.Ready.toString()&&!E.default.silentError&&console.error("view_state is not ready"),f===L.Expired.toString())throw new Error("content_state is expired");return[2,d];case 4:throw h=g.sent(),!E.default.silentError&&console.log(h),new Error("AMSGetViewStatusFailed");case 5:return[2]}})})},We=function(e,t,n,o){return q(void 0,void 0,void 0,function(){var s,a,l,d,f,i;return F(this,function(u){switch(u.label){case 0:E.default.debug&&console.log("[API][getView]"),G(n),s=t,a=W(n.token),K(o).includes(e.type)&&(a[S.Accept]="image/webp,image/ *,*/*;q=0.8",a[S.AcceptEncoding]="gzip, deflate, sdch, br"),l={headers:a,method:"GET"},u.label=1;case 1:return u.trys.push([1,4,,5]),[4,fetch(s,l)];case 2:return d=u.sent(),[4,d.blob()];case 3:return f=u.sent(),[2,f];case 4:throw i=u.sent(),!E.default.silentError&&console.log(i),new Error("AMSGetViewFailed");case 5:return[2]}})})};_.default={skypeTokenAuth:Pe,createObject:Ne,uploadDocument:xe,getViewStatus:Le,getView:We}});var be=I(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});var ze=function(){var e=new URLSearchParams(window.location.search);return e.get("clientId")!==null?e.get("clientId"):""};Q.default=ze});var Se=I(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var Be=function(){var e={disable:!0},t=new URLSearchParams(window.location.search);return t.get("debug")!==null&&(e.disable=t.get("debug")!="true"),e};Y.default=Be});var we=I(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});var Je=function(){var e={disable:!1},t=new URLSearchParams(window.location.search);return t.get("telemetry")!==null&&(e.disable=t.get("telemetry")!="true"),e};Z.default=Je});var Ee=I(H=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});var $;(function(e){e.IframeLoaded="AMSIframeLoaded",e.SkypeTokenAuth="AMSSkypeTokenAuth",e.CreateObject="AMSCreateObject",e.UploadDocument="AMSUploadDocument",e.GetViewStatus="AMSGetViewStatus",e.GetView="AMSGetView",e.SendTelemetry="AMSSendTelemetry"})($||($={}));H.default=$});var Ce=I(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});var ee;(function(e){e.None="None",e.Success="Success",e.Failure="Failure"})(ee||(ee={}));te.default=ee});var _e=I(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});var ne;(function(e){e.None="None",e.Request="Request",e.Response="Response"})(ne||(ne={}));re.default=ne});var ke=I(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});var ae;(function(e){e.INFO="INFO",e.DEBUG="DEBUG",e.WARN="WARN",e.ERROR="ERROR",e.LOG="LOG"})(ae||(ae={}));ie.default=ae});var Te=I(se=>{se.baseUrl="https://comms.omnichannelengagementhub.com/ams";se.sdkVersion="0.1.6"});var Ae=I(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});T.failEvent=T.completeEvent=T.startEvent=void 0;var Xe=function(e){return e+"Started"};T.startEvent=Xe;var Ke=function(e){return e+"Completed"};T.completeEvent=Ke;var Qe=function(e){return e+"Failed"};T.failEvent=Qe});var Re=I(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});var Ye=function(){function e(){}return e.prototype.start=function(){this.timeStart=new Date().getTime()},e.prototype.stop=function(){return new Date().getTime()-this.timeStart},e}();oe.default=Ye});var Oe=I(P=>{"use strict";var U=P&&P.__assign||function(){return U=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},U.apply(this,arguments)};Object.defineProperty(P,"__esModule",{value:!0});var ue=ke(),Ze=Te(),le=Ae(),$e=Re(),He=function(){function e(t){this.runtimeId="",this.sdkVersion="",this.logger=t,this.sdkVersion=Ze.sdkVersion,this.telemetryEvents=new Map}return e.prototype.setRuntimeId=function(t){this.runtimeId=t},e.prototype.startScenario=function(t,n){if(n===void 0&&(n={}),!this.telemetryEvents.has(t)){var o=new $e.default;o.start(),this.telemetryEvents.set(t,o)}var s=U({AMSClientRuntimeId:this.runtimeId,Event:le.startEvent(t),AMSClientVersion:this.sdkVersion},n);this.logger.log(ue.default.INFO,t,s)},e.prototype.failScenario=function(t,n){if(n===void 0&&(n={}),!this.telemetryEvents.has(t)){console.warn("'"+t+"' event has not started.");return}var o=this.telemetryEvents.get(t);this.telemetryEvents.delete(t);var s=U({AMSClientRuntimeId:this.runtimeId,Event:le.failEvent(t),AMSClientVersion:this.sdkVersion,ElapsedTimeInMilliseconds:o.stop()},n);this.logger.log(ue.default.ERROR,t,s)},e.prototype.completeScenario=function(t,n){if(n===void 0&&(n={}),!this.telemetryEvents.has(t)){console.warn("'"+t+"' event has not started.");return}var o=this.telemetryEvents.get(t);this.telemetryEvents.delete(t);var s=U({AMSClientRuntimeId:this.runtimeId,Event:le.completeEvent(t),AMSClientVersion:this.sdkVersion,ElapsedTimeInMilliseconds:o.stop()},n);this.logger.log(ue.default.INFO,t,s)},e}();P.default=He});var De=I(N=>{"use strict";var de=N&&N.__assign||function(){return de=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},de.apply(this,arguments)};Object.defineProperty(N,"__esModule",{value:!0});var et=function(){function e(t){this.debug=!1,this.debug=!1,this.logger=t}return e.prototype.setDebug=function(t){this.debug=t},e.prototype.log=function(t,n,o){var s,a=de({Event:n},o);this.debug&&console.log(a),(s=this.logger)===null||s===void 0||s.logClientSdkTelemetryEvent(t,a)},e}();N.default=et});var je=I(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});var tt=function(e){if(!e)return"";var t=e.split(".");if(t.length>2)return"."+t[t.length-1];if(t.length==2){var n=t[0],o=t[1];return!n&&o?"":n&&!o?".":"."+t[t.length-1]}return""};ce.default=tt});var ot=I(k=>{"use strict";var fe=k&&k.__assign||function(){return fe=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},fe.apply(this,arguments)},Ve=k&&k.__awaiter||function(e,t,n,o){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function d(u){try{i(o.next(u))}catch(h){l(h)}}function f(u){try{i(o.throw(u))}catch(h){l(h)}}function i(u){u.done?a(u.value):s(u.value).then(d,f)}i((o=o.apply(e,t||[])).next())})},qe=k&&k.__generator||function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,s,a,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(i){return function(u){return f([i,u])}}function f(i){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,s&&(a=i[0]&2?s.return:i[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,i[1])).done)return a;switch(s=0,a&&(i=[i[0]&2,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return n.label++,{value:i[1],done:!1};case 5:n.label++,s=i[1],i=[0];continue;case 7:i=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(i[0]===6||i[0]===2)){n=0;continue}if(i[0]===3&&(!a||i[1]>a[0]&&i[1]<a[3])){n.label=i[1];break}if(i[0]===6&&n.label<a[1]){n.label=a[1],a=i;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(i);break}a[2]&&n.ops.pop(),n.trys.pop();continue}i=t.call(e,n)}catch(u){i=[6,u],s=0}finally{o=a=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(k,"__esModule",{value:!0});var x=Ie(),nt=be(),rt=Se(),at=we(),c=Ee(),y=Ce(),M=_e(),it=Oe(),st=De(),w=je(),Fe=function(){function e(t){var n=this;this.clientId=t,this.sourceWindow=window,this.targetWindow=window.parent,this.debug=!1,this.telemetryEnabled=!1,this.logger={logClientSdkTelemetryEvent:function(o,s){n.sendTelemetry(o,s)}},this.scenarioMarker=new it.default(new st.default(this.logger))}return e.prototype.setDebug=function(t){this.debug=t},e.prototype.enableTelemetry=function(){this.debug&&console.log("[IframeCommunicator][enableTelemetry]"),this.telemetryEnabled=!0},e.prototype.initialize=function(){return Ve(this,void 0,void 0,function(){var t=this;return qe(this,function(n){return this.onMessageEvent(function(o){return t.handleEvent(o)}),this.postMessage(M.default.Response,c.default.IframeLoaded,{},y.default.Success),[2]})})},e.prototype.onMessageEvent=function(t){this.sourceWindow.addEventListener("message",t)},e.prototype.postMessage=function(t,n,o,s){o===void 0&&(o={}),this.targetWindow.postMessage(fe({clientId:this.clientId,eventType:t,eventName:n,eventStatus:s},o),"*")},e.prototype.handleEvent=function(t){var n,o,s,a,l,d,f,i,u,h,b,g,A,R,C,z,B,J;return Ve(this,void 0,void 0,function(){var r,p,v,he,p,v,pe,v,p,v,ve,v,p,v,me,p,v,ge;return qe(this,function(m){switch(m.label){case 0:if(t.data.clientId!==this.clientId)return[2];if(t.data.eventType!==M.default.Request)return[3,24];if(this.debug&&console.log("[IframeCommunicator][Request]"),r=t.data,t.data.eventName!==c.default.SkypeTokenAuth)return[3,5];this.scenarioMarker.startScenario(c.default.SkypeTokenAuth,{AMSClientRuntimeId:r.runtimeId,ChatId:r.chatToken.chatId}),m.label=1;case 1:return m.trys.push([1,3,,4]),[4,x.default.skypeTokenAuth(r.chatToken)];case 2:return p=m.sent(),v={requestId:r.requestId,eventType:M.default.Response,eventName:r.eventName,eventStatus:y.default.Success},p.ok?this.scenarioMarker.completeScenario(c.default.SkypeTokenAuth,{AMSClientRuntimeId:r.runtimeId,ChatId:r.chatToken.chatId}):(v.eventStatus=y.default.Failure,this.scenarioMarker.failScenario(c.default.SkypeTokenAuth,{AMSClientRuntimeId:r.runtimeId,ChatId:r.chatToken.chatId,ExceptionDetails:{status:p.status}})),this.postMessage(M.default.Response,c.default.SkypeTokenAuth,v,y.default.Success),[3,4];case 3:return he=m.sent(),this.postMessage(M.default.Response,c.default.SkypeTokenAuth,{},y.default.Failure),this.scenarioMarker.failScenario(c.default.SkypeTokenAuth,{AMSClientRuntimeId:r.runtimeId,ChatId:r.chatToken.chatId,ExceptionDetails:he}),[3,4];case 4:return[3,24];case 5:if(t.data.eventName!==c.default.CreateObject)return[3,10];this.scenarioMarker.startScenario(c.default.CreateObject,{AMSClientRuntimeId:r.runtimeId,ChatId:r.chatToken.chatId,MimeType:r.file.type,FileExtension:w.default(r.file.name)}),m.label=6;case 6:return m.trys.push([6,8,,9]),[4,x.default.createObject(r.id,r.file,r.chatToken,r.supportedImagesMimeTypes)];case 7:return p=m.sent(),v={requestId:r.requestId,eventType:M.default.Response,eventName:r.eventName,eventStatus:y.default.Success,response:p},this.scenarioMarker.completeScenario(c.default.CreateObject,{AMSClientRuntimeId:r.runtimeId,ChatId:r.chatToken.chatId,DocumentId:p==null?void 0:p.id,MimeType:r.file.type,FileExtension:w.default(r.file.name)}),this.postMessage(M.default.Response,c.default.CreateObject,v,y.default.Success),[3,9];case 8:return pe=m.sent(),v={requestId:r.requestId,eventType:M.default.Response,eventName:r.eventName,eventStatus:y.default.Failure},this.postMessage(M.default.Response,c.default.CreateObject,v,y.default.Failure),this.scenarioMarker.failScenario(c.default.CreateObject,{AMSClientRuntimeId:r.runtimeId,ChatId:r.chatToken.chatId,MimeType:r.file.type,FileExtension:w.default(r.file.name),ExceptionDetails:pe}),[3,9];case 9:return[3,24];case 10:if(t.data.eventName!==c.default.UploadDocument)return[3,15];this.scenarioMarker.startScenario(c.default.UploadDocument,{AMSClientRuntimeId:r.runtimeId,ChatId:r.chatToken.chatId,DocumentId:r.documentId,MimeType:r.file.type,FileExtension:w.default(r.file.name)}),m.label=11;case 11:return m.trys.push([11,13,,14]),[4,x.default.uploadDocument(r.documentId,r.file,r.chatToken,r.supportedImagesMimeTypes)];case 12:return p=m.sent(),v={requestId:r.requestId,eventType:M.default.Response,eventName:r.eventName,eventStatus:y.default.Success,response:p,data:p},this.scenarioMarker.completeScenario(c.default.UploadDocument,{AMSClientRuntimeId:r.runtimeId,ChatId:r.chatToken.chatId,DocumentId:r.documentId,MimeType:r.file.type,FileExtension:w.default(r.file.name)}),this.postMessage(M.default.Response,c.default.UploadDocument,v,y.default.Success),[3,14];case 13:return ve=m.sent(),v={requestId:r.requestId,eventType:M.default.Response,eventName:r.eventName,eventStatus:y.default.Failure},this.postMessage(M.default.Response,c.default.UploadDocument,v,y.default.Failure),this.scenarioMarker.failScenario(c.default.UploadDocument,{AMSClientRuntimeId:r.runtimeId,ChatId:r.chatToken.chatId,DocumentId:r.documentId,MimeType:r.file.type,FileExtension:w.default(r.file.name),ExceptionDetails:ve}),[3,14];case 14:return[3,24];case 15:if(t.data.eventName!==c.default.GetViewStatus)return[3,20];this.scenarioMarker.startScenario(c.default.GetViewStatus,{AMSClientRuntimeId:r.runtimeId,ChatId:r.chatToken.chatId,DocumentId:(n=r.fileMetadata)===null||n===void 0?void 0:n.id,MimeType:(o=r.fileMetadata)===null||o===void 0?void 0:o.type,FileExtension:w.default((s=r.fileMetadata)===null||s===void 0?void 0:s.name)}),m.label=16;case 16:return m.trys.push([16,18,,19]),[4,x.default.getViewStatus(r.fileMetadata,r.chatToken,r.supportedImagesMimeTypes)];case 17:return p=m.sent(),v={requestId:r.requestId,eventType:M.default.Response,eventName:r.eventName,eventStatus:y.default.Success,response:p,data:p},this.scenarioMarker.completeScenario(c.default.GetViewStatus,{AMSClientRuntimeId:r.runtimeId,ChatId:r.chatToken.chatId,DocumentId:(a=r.fileMetadata)===null||a===void 0?void 0:a.id,MimeType:(l=r.fileMetadata)===null||l===void 0?void 0:l.type,FileExtension:w.default((d=r.fileMetadata)===null||d===void 0?void 0:d.name)}),this.postMessage(M.default.Response,c.default.GetViewStatus,v,y.default.Success),[3,19];case 18:return me=m.sent(),this.postMessage(M.default.Response,c.default.GetViewStatus,{},y.default.Failure),this.scenarioMarker.failScenario(c.default.GetViewStatus,{AMSClientRuntimeId:r.runtimeId,ChatId:r.chatToken.chatId,DocumentId:(f=r.fileMetadata)===null||f===void 0?void 0:f.id,MimeType:(i=r.fileMetadata)===null||i===void 0?void 0:i.type,FileExtension:w.default((u=r.fileMetadata)===null||u===void 0?void 0:u.name),ExceptionDetails:me}),[3,19];case 19:return[3,24];case 20:if(t.data.eventName!==c.default.GetView)return[3,24];this.scenarioMarker.startScenario(c.default.GetView,{AMSClientRuntimeId:r.runtimeId,ChatId:r.chatToken.chatId,DocumentId:(h=r.fileMetadata)===null||h===void 0?void 0:h.id,MimeType:(b=r.fileMetadata)===null||b===void 0?void 0:b.type,FileExtension:w.default((g=r.fileMetadata)===null||g===void 0?void 0:g.name)}),m.label=21;case 21:return m.trys.push([21,23,,24]),[4,x.default.getView(r.fileMetadata,r.viewLocation,r.chatToken,r.supportedImagesMimeTypes)];case 22:return p=m.sent(),v={requestId:r.requestId,eventType:M.default.Response,eventName:r.eventName,eventStatus:y.default.Success,response:p,data:p},this.scenarioMarker.completeScenario(c.default.GetView,{AMSClientRuntimeId:r.runtimeId,ChatId:r.chatToken.chatId,DocumentId:(A=r.fileMetadata)===null||A===void 0?void 0:A.id,MimeType:(R=r.fileMetadata)===null||R===void 0?void 0:R.type,FileExtension:w.default((C=r.fileMetadata)===null||C===void 0?void 0:C.name)}),this.postMessage(M.default.Response,c.default.GetView,v,y.default.Success),[3,24];case 23:return ge=m.sent(),this.postMessage(M.default.Response,c.default.GetView,{},y.default.Failure),this.scenarioMarker.failScenario(c.default.GetView,{AMSClientRuntimeId:r.runtimeId,ChatId:r.chatToken.chatId,DocumentId:(z=r.fileMetadata)===null||z===void 0?void 0:z.id,MimeType:(B=r.fileMetadata)===null||B===void 0?void 0:B.type,FileExtension:w.default((J=r.fileMetadata)===null||J===void 0?void 0:J.name),ExceptionDetails:ge}),[3,24];case 24:return[2]}})})},e.prototype.sendTelemetry=function(t,n){var o={logLevel:t,logData:n};this.telemetryEnabled&&this.postMessage(M.default.Response,c.default.SendTelemetry,o,y.default.Success)},e}();k.default=Fe;(function(){var e=nt.default(),t=at.default(),n=rt.default();!n.disable&&console.log("[IframeCommunicator][init]");var o=new Fe(e);o.initialize(),o.setDebug(!n.disable),!t.disable&&o.enableTelemetry()})()});ot();})();
